link rel="import" href="../bower_components/polymer/polymer-element.html">
<!--
  ~  @license
  ~    Copyright 2017 Brigham Young University
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->

<link rel="import" href="shared-styles.html">

<dom-module id="cdn-libs-view">
  <template>
    <link href="https://cdn.byu.edu/byu-card/latest/byu-card.min.css" rel="stylesheet"/>
    <style include="shared-styles">
      :host {
        display: block;

        @apply --view-root;
      }

      .libraries {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .lib-card {
        box-shadow: 0 3px 12px rgba(0, 0, 0, .2);
        margin: 8px;
        width: calc(33% - 16px);
        display: flex;
        flex-direction: row;
      }

      .lib-image {
        width: 100px;
        height: 100px;
        background-color: green;
        flex-shrink: 0;
      }

      .lib-body {
        padding: 8px;
      }

      .lib-id {
        font-size: 1.5em;
      }
    </style>

    <h1>CDN Libraries</h1>

    <div class="libraries">
       <dom-repeat items="[[libraries]]">
        <template>
          <byu-card style="height: 350px;">
            <div class="image" style="background-color: green; height: 200px; width: 100%;">

            </div>
            <h2>[[item.id]]</h2>
            <div>[[item.definition.description]]</div>
          </byu-card>
        </template>
      </dom-repeat>
    </div>

  </template>

  <script>
    class LibsView extends Polymer.Element {
      static get is() {
        return 'cdn-libs-view';
      }

      static get properties() {
        return {
          cdnManifest: {
            type: Object
          },
          cdnManifestLoading: {
            type: Object,
            value: false
          },
          libraries: {
            type: Array,
            computed: '_extractLibraries(cdnManifest)'
          }
        }
      }

      _extractLibraries(manifest) {
        if (!manifest) {
          return [];
        }
        return Object.getOwnPropertyNames(manifest.libraries)
          .sort()
          .map(id => {
            return {
              id,
              definition: manifest.libraries[id]
            };
          });
      }
    }

    window.customElements.define(LibsView.is, LibsView);
  </script>
</dom-module>
